(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-41b325f2"],{"2f0c":function(t,e,a){"use strict";var n=a("7361");a.n(n).a},"333d":function(t,e,a){"use strict";var n={name:"Pagination",props:{small:{type:Boolean,default:!1},total:{required:!0,type:Number},page:{type:Number,default:1},background:{type:Boolean,default:!0},layout:{type:String,default:"prev, pager, next"},pageSize:{type:Number,default:10}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}}},methods:{handleClickPage:function(t){this.$emit("pagination",t)}}},r=(a("2f0c"),a("2877")),i=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{small:t.small,background:t.background,total:t.total,layout:t.layout,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleClickPage}})],1)}),[],!1,null,null,null);e.a=i.exports},7361:function(t,e,a){},7579:function(t,e,a){},8121:function(t,e,a){"use strict";var n=a("7579");a.n(n).a},a7cb:function(t,e,a){"use strict";a.r(e);var n=a("a34a"),r=a.n(n),i=a("2f62"),s=a("4360"),o=a("333d"),c=a("365c"),l=a("575f");function u(t,e,a,n,r,i,s){try{var o=t[i](s),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(n,r)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var i=t.apply(e,a);function s(t){u(i,n,r,s,o,"next",t)}function o(t){u(i,n,r,s,o,"throw",t)}s(void 0)}))}}function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var f,h,g,b,v,y,_,D,k,x,w,F,S,R,O,Q={components:{Pagination:o.a},data:function(){return{header:{token:s.a.getters.token},grade:s.a.getters.grade,d_id:"",c_id:"",addStaffVisible:!1,newDepartmentVisible:!1,isEditDepartment:!1,QRsettingVisible:!1,moveDialogVisible:!1,roleTypeDialogVisible:!1,QRcodeVisible:!1,filterText:"",canteens:[],haveCanteens:[],isEditStaff:!1,departmentDetail:{},queryForm:{c_id:""},departmentForm:{name:"",parent_id:"0",c_id:""},QRForm:{id:"",minute:"",hour:"",day:"",month:"",year:""},QRcodeDetail:{},addFormData:{id:"",canteens_arr:[],company_id:"",canteens:[],d_id:"",t_id:"",code:"",phone:"",card_num:"",username:""},treeData:[],departmentOptions:[],defaultProps:{children:"items",label:"name"},cureentDepartment:{department:"",id:"",new_d_id:""},roleTypeForm:{name:""},value:"",canteenGroup:[],tabledata:[],roleOptions:[],companyOptions:[],current_page:1,size:5,total:10}},filters:{showTime:function(t,e){return this.$moment(t).format(e)}},watch:{filterText:function(t){this.$refs.tree.filter(t)}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(a,!0).forEach((function(e){m(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(i.c)({role:function(t){return t.user.role},grade:function(t){return t.user.grade},token:function(t){return t.user.token}}),{staffTitle:{get:function(){return this.isEditStaff?"编辑员工":"新增员工"}},year:{get:function(){var t=this.QRForm.year.toString().replace(/[^\d]/g,"");return t=this.validateNumber(t,"year")},set:function(t){t=this.validateNumber(t,"year"),this.QRForm.year=t}},month:{get:function(){var t=this.QRForm.month.toString().replace(/[^\d]/g,"");return t=this.validateNumber(t,"month")},set:function(t){t=this.validateNumber(t,"month"),this.QRForm.month=t}},day:{get:function(){var t=this.QRForm.day.toString().replace(/[^\d]/g,"");return t=this.validateNumber(t,"day")},set:function(t){t=this.validateNumber(t,"day"),this.QRForm.day=t}},hour:{get:function(){var t=this.QRForm.hour.toString().replace(/[^\d]/g,"");return t=this.validateNumber(t,"hour")},set:function(t){t=this.validateNumber(t,"hour"),this.QRForm.hour=t}},minute:{get:function(){var t=this.QRForm.minute.toString().replace(/[^\d]/g,"");return t=this.validateNumber(t,"minute")},set:function(t){t=this.validateNumber(t,"minute"),this.QRForm.minute=t}},companiesVisible:function(){return 3!==this.grade}}),created:function(){this.getRoleType(),this.companyOptions?(this.fetchDepartmentTreeData(),this.getCompanies()):this.getDepartmentListWithoutCid()},methods:{validateNumber:function(t,e){switch(e){case"year":return t<0?0:t>5?5:t;case"month":return t<0?0:t>11?11:t;case"day":return t<0?0:t>30?30:t;case"hour":return t<0?0:t>23?23:t;case"minute":return t<0?0:t>59?59:t}},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},getCompanies:(O=d(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.get("http://canteen.tonglingok.com/api/v1/admin/companies");case 2:"ok"===(e=t.sent).msg&&(this.companyOptions=Object(l.a)(e.data));case 4:case"end":return t.stop()}}),t,this)}))),function(){return O.apply(this,arguments)}),getDepartmentListWithoutCid:(R=d(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.get("http://canteen.tonglingok.com/api/v1/admin/departments");case 2:"ok"===(e=t.sent).msg&&(this.departmentList=unshiftAllOptions(Aarray.from(e.data)));case 4:case"end":return t.stop()}}),t,this)}))),function(){return R.apply(this,arguments)}),getRoleType:(S=d(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.get("http://canteen.tonglingok.com/api/v1/role/types");case 2:"ok"===(e=t.sent).msg&&(this.roleOptions=e.data.data);case 4:case"end":return t.stop()}}),t,this)}))),function(){return S.apply(this,arguments)}),fetchDepartmentTreeData:(F=d(r.a.mark((function t(e){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||this.queryForm.c_id||"",t.next=3,c.a.get("http://canteen.tonglingok.com/api/v1/departments?c_id=".concat(e));case 3:"ok"===(a=t.sent).msg&&(this.treeData=Array.from(a.data),this.departmentOptions=Object(l.a)(a.data));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return F.apply(this,arguments)}),fetchList:(w=d(r.a.mark((function t(e){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||this.current_page,t.next=3,c.a.get("http://canteen.tonglingok.com/api/v1/staffs?page=".concat(e,"&size=").concat(this.size),{c_id:this.c_id,d_id:this.d_id});case 3:"ok"===(a=t.sent).msg&&(this.tabledata=Array.from(a.data.data),this.current_page=a.data.current_page,this.total=a.data.total);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return w.apply(this,arguments)}),selectCompany:(x=d(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCanteenOptions(e);case 2:return t.next=4,this.fetchDepartmentTreeData(e);case 4:this.c_id=e,this.d_id="",this.addFormData.company_id=e,this.addFormData.d_id="",this.departmentDetail={};case 9:case"end":return t.stop()}}),t,this)}))),function(t){return x.apply(this,arguments)}),handleNodeClick:(k=d(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.d_id=e.id,this.addFormData.d_id=e.id,this.departmentDetail=e,t.next=5,this.fetchList(1);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return k.apply(this,arguments)}),getCanteenOptions:(D=d(r.a.mark((function t(e){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e||"",t.next=3,c.a.get("http://canteen.tonglingok.com/api/v1/company/consumptionLocation?company_id=".concat(a));case 3:return"ok"===(n=t.sent).msg&&(this.canteenGroup=Array.from(n.data.canteen)),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return D.apply(this,arguments)}),editDepartmentDialog:function(t,e){this.isEditDepartment=!0,this.departmentForm=Object.assign({},this.departmentForm,e),this.newDepartmentVisible=!0},openDepartmentDialog:function(t,e){this.departmentForm.c_id=this.queryForm.c_id,this.departmentForm=Object.assign({},this.departmentForm,{parent_id:e.id,parent_name:e.name}),this.newDepartmentVisible=!0},closeDepartmentDialog:function(){this.newDepartmentVisible=!1,this.isEditDepartment=!1,this.$refs.departmentForm.resetFields()},_addNewDepartment:(_=d(r.a.mark((function t(){var e,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isEditDepartment){t.next=14;break}return t.next=3,c.a.post("http://canteen.tonglingok.com/api/v1/department/save",this.departmentForm);case 3:if("ok"!==(e=t.sent).msg){t.next=11;break}return this.$message.success("新增部门成功"),this.closeDepartmentDialog(),t.next=9,this.fetchDepartmentTreeData();case 9:t.next=12;break;case 11:this.$message.error("操作失败，失败原因:"+e.msg);case 12:t.next=25;break;case 14:return t.next=16,c.a.post("http://canteen.tonglingok.com/api/v1/department/update",this.departmentForm);case 16:if("ok"!==(a=t.sent).msg){t.next=24;break}return this.$message.success("修改成功"),this.closeDepartmentDialog(),t.next=22,this.fetchDepartmentTreeData();case 22:t.next=25;break;case 24:this.$message.error("操作失败，失败原因:"+a.msg);case 25:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)}),deleteDepartment:(y=d(r.a.mark((function t(){var e,a=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.departmentDetail,this.$confirm("此操作将删除".concat(e.name,"部门, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(d(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("http://canteen.tonglingok.com/api/v1/department/delete",{id:e.id});case 2:if("ok"!==(n=t.sent).msg){t.next=9;break}return a.$message({type:"success",message:"删除成功!"}),t.next=7,a.fetchDepartmentTreeData();case 7:t.next=10;break;case 9:a.$message.error(n.msg);case 10:case"end":return t.stop()}}),t)})))).catch((function(){a.$message({type:"info",message:"已取消删除"})}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)}),openStaffDialog:function(){this.addStaffVisible=!0},editStaff:function(t){var e=this;this.isEditStaff=!0;var a=t.canteens.map((function(t){return t.canteen_id}));a.filter((function(t){e.canteenGroup.forEach((function(a){a.id===t&&e.addFormData.canteens_arr.push(a)}))})),this.haveCanteens=a,this.addFormData=Object.assign({},this.addFormData,t),this.addStaffVisible=!0},closeStaffDialog:function(){this.addFormData={id:"",canteens_arr:[],company_id:"",canteens:[],d_id:"",t_id:"",code:"",phone:"",card_num:"",username:""},this.addStaffVisible=!1,this.isEditStaff=!1},_addNewStaff:(v=d(r.a.mark((function t(){var e,a,n,i,s,o=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isEditStaff){t.next=20;break}return this.addFormData.company_id=this.c_id,this.addFormData.d_id=this.d_id,this.addFormData.canteens=[],e=[],this.addFormData.canteens_arr.forEach((function(t){e.push({canteen_id:t.id})})),this.addFormData.canteens=JSON.stringify(e),t.next=9,c.a.post("http://canteen.tonglingok.com/api/v1/department/staff/save",this.addFormData);case 9:if("ok"!==(a=t.sent).msg){t.next=17;break}return this.$message.success("添加成功"),this.closeStaffDialog(),t.next=15,this.fetchList(this.current_page);case 15:t.next=18;break;case 17:this.$message.error(a.msg);case 18:t.next=35;break;case 20:return n=this.addFormData.canteens_arr.map((function(t){return t.id})),i=[],s=[],this.haveCanteens.forEach((function(t){-1===n.indexOf(t)&&o.addFormData.canteens.forEach((function(e){e.canteen_id===t&&s.push(e.id)}))})),n.forEach((function(t){-1===o.haveCanteens.indexOf(t)&&i.push(t)})),this.addFormData.cancel_canteens=JSON.stringify(s),this.addFormData.canteens=JSON.stringify(i),t.next=29,c.a.post("http://canteen.tonglingok.com/api/v1/department/staff/update",this.addFormData);case 29:if("ok"!==t.sent.msg){t.next=35;break}return this.$message.success("修改成功"),this.closeStaffDialog(),t.next=35,this.fetchList(this.current_page);case 35:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)}),_deleteStaff:(b=d(r.a.mark((function t(e){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.id,t.next=3,c.a.post("http://canteen.tonglingok.com/api/v1/department/staff/delete",{id:a});case 3:if("ok"!==t.sent.msg){t.next=8;break}return this.$message.success("删除成功"),t.next=8,this.fetchList(this.current_page);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)}),openQRSettingDialog:function(t){var e=t.id;this.QRForm.id=e,this.QRsettingVisible=!0,console.log(this.QRForm)},closeQRSettingDialog:function(){this.QRsettingVisible=!1,this.QRForm={minute:"",hour:"",day:"",month:"",year:""}},_comfirmSettingQR:(g=d(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("http://canteen.tonglingok.com/api/v1/staff/qrcode/save",this.QRForm);case 2:if(e=t.sent,console.log(e),"ok"!==e.msg){t.next=11;break}return this.$message.success("设置成功"),this.closeQRSettingDialog(),t.next=9,this.fetchList(this.current_page);case 9:t.next=12;break;case 11:this.$message.error(e.msg);case 12:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)}),closeMoveDialog:function(){this.cureentDepartment={},this.moveDialogVisible=!1},openMoveStaff:function(t){this.moveDialogVisible=!0,console.log(t);t.d_id;this.cureentDepartment=Object.assign({},{department:t.department,id:t.id})},_comfirmMove:(h=d(r.a.mark((function t(){var e,a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.cureentDepartment.id,a=this.cureentDepartment.new_d_id,t.next=4,c.a.post("http://canteen.tonglingok.com/api/v1/department/staff/move",{id:e,d_id:a});case 4:"ok"===(n=t.sent).msg?(this.$message.success("操作成功"),this.closeMoveDialog()):this.$message.error(n.msg);case 6:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)}),handleSuccess:function(t,e,a){"ok"===t.msg?this.$message.success("操作成功"):this.$message.error("请上传正确模板文件")},openRoleTypeDialog:function(){this.roleTypeDialogVisible=!0},closeRoleTypeDialog:function(){this.$refs.roleTypeForm.resetFields(),this.roleTypeDialogVisible=!1},_addRoleType:(f=d(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("http://canteen.tonglingok.com/api/v1/role/type/save",this.roleTypeForm);case 2:if("ok"!==(e=t.sent).msg){t.next=10;break}return this.$message.success("新增成功"),t.next=7,this.getRoleType();case 7:this.closeRoleTypeDialog(),t.next=11;break;case 10:this.$message.error(e.msg);case 11:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),showQRcode:function(t){console.log(t),this.QRcodeDetail=Object.assign({},this.QRcodeDetail,t),this.QRcodeVisible=!0},closeQRcode:function(){this.QRcodeVisible=!1,this.QRcodeDetail={}}}},T=(a("8121"),a("2877")),$=Object(T.a)(Q,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"department"},[a("div",{staticClass:"nav-title"},[t._v("部门人员设置")]),a("el-divider"),a("div",{staticClass:"main"},[a("div",{staticClass:"main-header"},[a("el-form",{attrs:{inline:!0}},[t.companiesVisible?a("el-form-item",{attrs:{label:"公司"}},[a("el-select",{on:{change:t.selectCompany},model:{value:t.queryForm.c_id,callback:function(e){t.$set(t.queryForm,"c_id",e)},expression:"queryForm.c_id"}},t._l(t.companyOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),a("el-button",{attrs:{type:"primary",disabled:!t.queryForm.c_id},on:{click:function(){return t.openDepartmentDialog({},{id:0})}}},[t._v("新增一级部门")]),a("el-button",{attrs:{type:"primary",disabled:!t.d_id},on:{click:t.openStaffDialog}},[t._v("新增人员")]),a("el-upload",{ref:"upload",staticClass:"upload-excel",attrs:{limit:1,headers:t.header,"show-file-list":!1,accept:".xls, .xlsx",action:"http://canteen.tonglingok.com/api/v1/department/staff/upload","on-success":t.handleSuccess,data:{c_id:t.c_id},name:"staffs"}},[a("el-button",{attrs:{type:"primary",disabled:!t.c_id}},[t._v("批量导入人员")])],1),a("el-button",{attrs:{type:"danger",disabled:!t.d_id},on:{click:t.deleteDepartment}},[t._v("删除部门")]),a("el-button",{attrs:{type:"primary"},on:{click:t.openRoleTypeDialog}},[t._v("新增类型")])],1),a("div",{staticClass:"main-content"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"small",placeholder:"关键字查询"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),a("el-tree",{ref:"tree",staticClass:"tree",attrs:{data:t.treeData,props:t.defaultProps,"filter-node-method":t.filterNode,"default-expand-all":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,r=e.data;return a("span",{staticClass:"department-tree-node"},[a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleNodeClick(r)}}},[t._v("\n                    "+t._s(n.label)+"\n                  ")])],1),a("span",{staticClass:"btns-text"},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.editDepartmentDialog(n,r)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.openDepartmentDialog(n,r)}}},[t._v("新增")])],1)])}}])})],1),a("el-col",{attrs:{span:20}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tabledata}},[a("el-table-column",{attrs:{label:"归属饭堂"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                    "+t._s(e.row.canteens.map((function(t){if(t.info&&t.info.name)return t.info.name})).filter((function(t){return t})).join(","))+"\n                    ")])]}}])}),a("el-table-column",{attrs:{label:"人员类型",prop:"type"}}),a("el-table-column",{attrs:{label:"员工编号",prop:"code"}}),a("el-table-column",{attrs:{label:"姓名",prop:"username"}}),a("el-table-column",{attrs:{label:"手机号码",prop:"phone"}}),a("el-table-column",{attrs:{label:"卡号",prop:"card_num"}}),a("el-table-column",{attrs:{label:"二维码有效周期","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.showQRcode(e.row)}}},[t._v(t._s(e.row.expiry_date))])]}}])}),a("el-table-column",{attrs:{label:"操作",prop:"new"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[a("el-button",{staticStyle:{marginRight:"5px",marginBottom:"5px"},attrs:{size:"mini"},on:{click:function(a){return t.editStaff(e.row)}}},[t._v("编辑")]),a("el-button",{staticStyle:{marginRight:"5px",marginBottom:"5px"},attrs:{size:"mini"},on:{click:function(a){return t.openMoveStaff(e.row)}}},[t._v("移动")]),a("el-button",{staticStyle:{marginRight:"5px",marginBottom:"5px"},attrs:{size:"mini"},on:{click:function(a){return t._deleteStaff(e.row)}}},[t._v("删除")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.openQRSettingDialog(e.row)}}},[t._v("生成二维码")])],1)]}}])})],1),a("pagination",{attrs:{currentPage:t.current_page,total:t.total,pageSize:t.size},on:{pagination:t.fetchList}})],1)],1)],1)],1)]),a("el-dialog",{attrs:{title:t.staffTitle,width:"30%",center:"",visible:t.addStaffVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addStaffVisible=e},close:t.closeStaffDialog}},[a("el-form",{ref:"addFormData",attrs:{model:t.addFormData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"归属饭堂",prop:"canteens_arr"}},[a("el-checkbox-group",{model:{value:t.addFormData.canteens_arr,callback:function(e){t.$set(t.addFormData,"canteens_arr",e)},expression:"addFormData.canteens_arr"}},t._l(t.canteenGroup,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e,value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("el-form-item",{attrs:{label:"人员类型",prop:"t_id"}},[a("el-select",{model:{value:t.addFormData.t_id,callback:function(e){t.$set(t.addFormData,"t_id",e)},expression:"addFormData.t_id"}},t._l(t.roleOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"员工编号",prop:"code"}},[a("el-input",{model:{value:t.addFormData.code,callback:function(e){t.$set(t.addFormData,"code",e)},expression:"addFormData.code"}})],1),a("el-form-item",{attrs:{label:"员工姓名",prop:"username"}},[a("el-input",{model:{value:t.addFormData.username,callback:function(e){t.$set(t.addFormData,"username",e)},expression:"addFormData.username"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{model:{value:t.addFormData.phone,callback:function(e){t.$set(t.addFormData,"phone",e)},expression:"addFormData.phone"}})],1),a("el-form-item",{attrs:{label:"卡号",prop:"card_num"}},[a("el-input",{model:{value:t.addFormData.card_num,callback:function(e){t.$set(t.addFormData,"card_num",e)},expression:"addFormData.card_num"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeStaffDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t._addNewStaff}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:t.newDepartmentVisible,title:"新增部门",center:"",width:"30%"},on:{"update:visible":function(e){t.newDepartmentVisible=e},close:t.closeDepartmentDialog}},[a("el-form",{ref:"departmentForm",attrs:{model:t.departmentForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[a("el-input",{model:{value:t.departmentForm.name,callback:function(e){t.$set(t.departmentForm,"name",e)},expression:"departmentForm.name"}})],1),t.departmentForm.parent_id?a("el-form-item",{attrs:{label:"归属部门"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.departmentForm.parent_name,callback:function(e){t.$set(t.departmentForm,"parent_name",e)},expression:"departmentForm.parent_name"}})],1):t._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDepartmentDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t._addNewDepartment}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:t.QRsettingVisible,width:"35%",center:"",title:"二维码设置"},on:{"update:visible":function(e){t.QRsettingVisible=e},close:t.closeQRSettingDialog}},[a("el-form",{attrs:{model:t.QRForm}},[a("el-form-item",{attrs:{label:"二维码有效期"}},[a("el-input",{staticStyle:{width:"50px"},attrs:{size:"small"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}}),t._v("年\n        "),a("el-input",{staticStyle:{width:"50px"},attrs:{size:"small"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}}),t._v("月\n        "),a("el-input",{staticStyle:{width:"50px"},attrs:{size:"small"},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}}),t._v("日\n        "),a("el-input",{staticStyle:{width:"50px"},attrs:{size:"small"},model:{value:t.hour,callback:function(e){t.hour=e},expression:"hour"}}),t._v("时\n        "),a("el-input",{staticStyle:{width:"50px"},attrs:{size:"small"},model:{value:t.minute,callback:function(e){t.minute=e},expression:"minute"}}),t._v("分\n      ")],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeQRSettingDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t._comfirmSettingQR}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:t.moveDialogVisible,width:"30%",title:"移动员工",center:""},on:{"update:visible":function(e){t.moveDialogVisible=e},close:t.closeMoveDialog}},[a("el-form",{ref:"moveStaff",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"当前部门"}},[a("el-input",{attrs:{disabled:""},model:{value:t.cureentDepartment.department,callback:function(e){t.$set(t.cureentDepartment,"department",e)},expression:"cureentDepartment.department"}})],1),a("el-form-item",{attrs:{label:"移至"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择部门"},model:{value:t.cureentDepartment.new_d_id,callback:function(e){t.$set(t.cureentDepartment,"new_d_id",e)},expression:"cureentDepartment.new_d_id"}},t._l(t.departmentOptions,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeMoveDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t._comfirmMove}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{width:"30%",visible:t.roleTypeDialogVisible,center:"",title:"新增角色类型"},on:{"update:visible":function(e){t.roleTypeDialogVisible=e},close:t.closeRoleTypeDialog}},[a("el-form",{ref:"roleTypeForm",attrs:{model:t.roleTypeForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{model:{value:t.roleTypeForm.name,callback:function(e){t.$set(t.roleTypeForm,"name",e)},expression:"roleTypeForm.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeRoleTypeDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t._addRoleType}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:t.QRcodeVisible,width:"20%",center:"",title:"二维码信息"},on:{"update:visible":function(e){t.QRcodeVisible=e}}},[a("img",{attrs:{width:"100%",src:t.QRcodeDetail.url,alt:""}}),a("ul",{staticClass:"qr-detail"},[a("li",[t._v("员工姓名："+t._s(t.QRcodeDetail.username))]),a("li",[t._v("生成时间："+t._s(t.QRcodeDetail.create_time))]),a("li",[t._v("失效时间："+t._s(t.QRcodeDetail.expiry_date))])])])],1)}),[],!1,null,"be44deae",null);e.default=$.exports}}]);