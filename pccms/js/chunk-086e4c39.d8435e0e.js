(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-086e4c39"],{"26aa":function(t,e,a){"use strict";a.r(e);var n=a("a34a"),o=a.n(n),r=a("365c"),i=a("575f"),s=a("4360"),l=a("333d");function c(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var r=t.apply(e,a);function i(t){c(r,n,o,i,s,"next",t)}function s(t){c(r,n,o,i,s,"throw",t)}i(void 0)}))}}var u,p,m,f,g=[{id:0,name:"全部"},{id:1,name:"已完成"},{id:2,name:"未完成"},{id:3,name:"待取货"},{id:4,name:"已取货"}],h={components:{Pagination:l.a},data:function(){return{loading:!1,company_id:"",canteen_id:"",formdata:{type:1},categoryOptions:[],productOptions:[],goodStateOptions:g,tableData:[],isDisabled:!0,current_page:1,size:10,total:0}},computed:{isAble:function(){return!!this.formdata.time_end&&!!this.formdata.time_begin}},watch:{isAble:function(t){this.isDisabled=!t}},created:function(){this.getCategoryOptions(),this.getProductsId()},methods:{getCategoryOptions:(f=d(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.get("http://canteen.tonglingok.com/api/v1/company/categories");case 2:"ok"===(e=t.sent).msg&&(this.categoryOptions=Object(i.d)(Array.from(e.data)));case 4:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),getProductsId:(m=d(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios({url:"http://canteen.tonglingok.com/api/v1/shop/supplierProducts/search",methods:"get",headers:{token:s.a.getters.token}});case 2:"ok"===(a=t.sent).data.msg&&(console.log(a.data.data),this.productOptions=Object(i.d)(Array.from(a.data.data)));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)}),remoteMethod:(p=d(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==e){t.next=9;break}return this.loading=!0,t.next=4,this.$axios({url:"http://canteen.tonglingok.com/api/v1/shop/supplierProducts/search?product=".concat(e),methods:"get",headers:{token:s.a.getters.token}});case 4:"ok"===(a=t.sent).data.msg&&(console.log(a.data.data),this.productOptions=Array.from(a.data.data)),this.loading=!1,t.next=11;break;case 9:return t.next=11,this.getProductsId();case 11:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)}),queryList:(u=d(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||1,t.next=3,r.a.get("http://canteen.tonglingok.com/api/v1/shop/orderConsumption?page=".concat(e,"&size=").concat(this.size),this.formdata);case 3:"ok"===(a=t.sent).msg&&(this.tableData=Array.from(a.data.data),this.total=a.data.total,this.current_page=a.data.current_page);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})}},y=(a("5f59"),a("2877")),b=Object(y.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"canteen-statistics"},[a("div",{staticClass:"nav-title"},[t._v("消费订单汇总查询")]),a("el-divider"),a("div",{staticClass:"main"},[a("div",{staticClass:"main-header"},[a("div",{staticClass:"select-title"},[a("el-form",{attrs:{inline:!0,model:t.formdata,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"开始"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd",type:"datetime"},model:{value:t.formdata.time_begin,callback:function(e){t.$set(t.formdata,"time_begin",e)},expression:"formdata.time_begin"}})],1),a("el-form-item",{attrs:{label:"结束"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd",type:"datetime"},model:{value:t.formdata.time_end,callback:function(e){t.$set(t.formdata,"time_end",e)},expression:"formdata.time_end"}})],1),a("el-form-item",{attrs:{label:"商品类型"}},[a("el-select",{model:{value:t.formdata.category_id,callback:function(e){t.$set(t.formdata,"category_id",e)},expression:"formdata.category_id"}},t._l(t.categoryOptions,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{remote:"",filterable:"","remote-method":t.remoteMethod,loading:t.loading,placeholder:"请选择商品名称"},model:{value:t.formdata.product_id,callback:function(e){t.$set(t.formdata,"product_id",e)},expression:"formdata.product_id"}},t._l(t.productOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{model:{value:t.formdata.status,callback:function(e){t.$set(t.formdata,"status",e)},expression:"formdata.status"}},t._l(t.goodStateOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{staticClass:"types-radio"},[a("el-radio-group",{on:{change:function(e){return t.queryList(t.current_page)}},model:{value:t.formdata.type,callback:function(e){t.$set(t.formdata,"type",e)},expression:"formdata.type"}},[a("el-radio",{attrs:{label:1}},[t._v("按类型汇总")]),a("el-radio",{attrs:{label:2}},[t._v("按商品汇总")]),a("el-radio",{attrs:{label:3}},[t._v("按状态汇总")])],1)],1)],1)],1),a("div",{staticClass:"btn-area"},[a("el-button",{attrs:{type:"primary",disabled:t.isDisabled},on:{click:t.queryList}},[t._v("查询")]),a("el-button",{attrs:{type:"primary"}},[t._v("导出")])],1)]),a("div",{staticClass:"main-content"},[a("el-table",{attrs:{border:"",data:t.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50px"}}),a("el-table-column",{attrs:{label:"统计变量"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.statistic))}})}}])}),a("el-table-column",{attrs:{label:"下单时间"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.create_time))}})}}])}),a("el-table-column",{attrs:{label:"结束时间"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.used_time))}})}}])}),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.username))}})}}])}),a("el-table-column",{attrs:{label:"部门"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.department))}})}}])}),a("el-table-column",{attrs:{label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.category))}})}}])}),a("el-table-column",{attrs:{label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.product))}})}}])}),a("el-table-column",{attrs:{label:"单位"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.unit))}})}}])}),a("el-table-column",{attrs:{label:"数量"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.order_count))}})}}])}),a("el-table-column",{attrs:{label:"报表总销售额"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{domProps:{innerHTML:t._s(t.showCellData(e.row.order_money))}})}}])})],1),a("pagination",{attrs:{total:t.total,pageSize:t.size,currentPage:t.current_page},on:{pagination:t.queryList}})],1)])],1)}),[],!1,null,"484e1db0",null);e.default=b.exports},"2f0c":function(t,e,a){"use strict";var n=a("7361");a.n(n).a},"333d":function(t,e,a){"use strict";var n={name:"Pagination",props:{small:{type:Boolean,default:!1},total:{required:!0,type:Number},page:{type:Number,default:1},background:{type:Boolean,default:!0},layout:{type:String,default:"prev, pager, next"},pageSize:{type:Number,default:10}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}}},methods:{handleClickPage:function(t){this.$emit("pagination",t)}}},o=(a("2f0c"),a("2877")),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{small:t.small,background:t.background,total:t.total,layout:t.layout,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleClickPage}})],1)}),[],!1,null,null,null);e.a=r.exports},"5f59":function(t,e,a){"use strict";var n=a("c52f");a.n(n).a},7361:function(t,e,a){},c52f:function(t,e,a){}}]);