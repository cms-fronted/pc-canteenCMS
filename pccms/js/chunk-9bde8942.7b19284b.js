(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9bde8942"],{"2f0c":function(t,e,a){"use strict";var n=a("7361");a.n(n).a},"333d":function(t,e,a){"use strict";var n={name:"Pagination",props:{small:{type:Boolean,default:!1},total:{required:!0,type:Number},page:{type:Number,default:1},background:{type:Boolean,default:!0},layout:{type:String,default:"prev, pager, next"},pageSize:{type:Number,default:10}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}}},methods:{handleClickPage:function(t){this.$emit("pagination",t)}}},r=(a("2f0c"),a("2877")),i=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{small:t.small,background:t.background,total:t.total,layout:t.layout,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleClickPage}})],1)}),[],!1,null,null,null);e.a=i.exports},7361:function(t,e,a){},b061:function(t,e,a){"use strict";var n=a("f44c");a.n(n).a},d77c:function(t,e,a){"use strict";a.r(e);var n=a("a34a"),r=a.n(n),i=a("365c"),o=a("333d"),l=a("575f"),s=a("4360");function c(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t,e,a,n,r,i,o){try{var l=t[i](o),s=l.value}catch(t){return void a(t)}l.done?e(s):Promise.resolve(s).then(n,r)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var i=t.apply(e,a);function o(t){p(i,n,r,o,l,"next",t)}function l(t){p(i,n,r,o,l,"throw",t)}o(void 0)}))}}var u,m,f,b,g,h={components:{Pagination:o.a},data:function(){return{grade:s.a.getters.grade,formdata:{company_ids:null,canteen_id:null,department_id:null,dinner_id:null,time_begin:"",time_end:"",phone:null,name:null,consumption_type:null},current_page:1,size:10,total:0,tableData:[],canteenOptions:[],companyOptions:[],departmentOptions:[],dinnersOptions:[],isDisabled:!0}},created:function(){this.companiesVisible?this.getCompanyOptions():this.getCanteenOptions()},methods:{getOptions:function(t){this.canteenOptions=[],this.dinnersOptions=[],this.departmentOptions=[],this.formdata.canteen_id="",this.formdata.dinner_id="",this.formdata.department_id="",Number(t)&&(this.getCanteenOptions(t),this.getDepartmentOptions(t))},getCompanyOptions:(g=d(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("http://canteen.tonglingok.com/api/v1/admin/companies");case 2:"ok"===(e=t.sent).msg&&(this.companyOptions=Object(l.b)(Object(l.a)(e.data)));case 4:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)}),getCanteenOptions:(b=d(r.a.mark((function t(e){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,i.a.get("http://canteen.tonglingok.com/api/v1/canteens?company_id=".concat(e));case 3:a=t.sent,t.next=9;break;case 6:return t.next=8,i.a.get("http://canteen.tonglingok.com/api/v1/managerCanteens");case 8:a=t.sent;case 9:"ok"===a.msg&&(this.canteenOptions=Object(l.d)(Array.from(a.data)));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)}),getDepartmentOptions:(f=d(r.a.mark((function t(e){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("v1/departments?c_id=".concat(e));case 2:"ok"===(a=t.sent).msg&&(this.departmentOptions=Object(l.d)(Object(l.a)(a.data)));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)}),getDinnersOptions:(m=d(r.a.mark((function t(e){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,i.a.get("http://canteen.tonglingok.com/api/v1/canteen/dinners?canteen_id=".concat(e));case 3:"ok"===(a=t.sent).msg&&(this.dinnersOptions=Object(l.d)(Array.from(a.data)));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)}),queryList:(u=d(r.a.mark((function t(e){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||1,t.next=3,i.a.get("http://canteen.tonglingok.com/api/v1/order/orderSettlement?page=".concat(e,"&size=").concat(this.size),this.formdata);case 3:"ok"===(a=t.sent).msg&&(this.tableData=c(a.data.data),this.total=a.data.total,this.current_page=a.data.current_page);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},computed:{isAble:function(){return!!this.formdata.time_end&&!!this.formdata.time_begin&&!!this.formdata.company_ids},companiesVisible:function(){return 3!==this.grade}},watch:{isAble:function(t){this.isDisabled=!t}}},y=(a("b061"),a("2877")),v=Object(y.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"settlement-details"},[a("div",{staticClass:"main"},[a("div",{staticClass:"nav-title"},[t._v("消费明细")]),a("el-divider"),a("div",{staticClass:"main-header"},[a("div",{staticClass:"select-title"},[a("el-form",{attrs:{inline:!0,model:t.formdata,"label-width":"60px","label-position":"left"}},[a("el-form-item",{attrs:{label:"开始"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd",type:"datetime"},model:{value:t.formdata.time_begin,callback:function(e){t.$set(t.formdata,"time_begin",e)},expression:"formdata.time_begin"}})],1),a("el-form-item",{attrs:{label:"结束"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd",type:"datetime"},model:{value:t.formdata.time_end,callback:function(e){t.$set(t.formdata,"time_end",e)},expression:"formdata.time_end"}})],1),t.companiesVisible?a("el-form-item",{attrs:{label:"公司"}},[a("el-select",{attrs:{placeholder:"请选择公司"},on:{change:t.getOptions},model:{value:t.formdata.company_ids,callback:function(e){t.$set(t.formdata,"company_ids",e)},expression:"formdata.company_ids"}},t._l(t.companyOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),a("el-form-item",{attrs:{label:"消费地点","label-width":"80px"}},[a("el-select",{attrs:{placeholder:"请选择饭堂"},on:{change:t.getDinnersOptions},model:{value:t.formdata.canteen_id,callback:function(e){t.$set(t.formdata,"canteen_id",e)},expression:"formdata.canteen_id"}},t._l(t.canteenOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"餐次"}},[a("el-select",{attrs:{placeholder:"请选择餐次"},model:{value:t.formdata.dinner_id,callback:function(e){t.$set(t.formdata,"dinner_id",e)},expression:"formdata.dinner_id"}},t._l(t.dinnersOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t.companiesVisible?a("el-form-item",{attrs:{label:"部门",prop:"department_id"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.formdata.department_id,callback:function(e){t.$set(t.formdata,"department_id",e)},expression:"formdata.department_id"}},t._l(t.departmentOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{staticStyle:{},attrs:{placeholder:"请输入姓名"},model:{value:t.formdata.name,callback:function(e){t.$set(t.formdata,"name",e)},expression:"formdata.name"}})],1),a("el-form-item",{attrs:{label:"手机号码","label-width":"80px"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.formdata.phone,callback:function(e){t.$set(t.formdata,"phone",e)},expression:"formdata.phone"}})],1),a("el-form-item",{attrs:{label:"消费类型","label-width":"80px",prop:"consumption_type"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.formdata.consumption_type,callback:function(e){t.$set(t.formdata,"consumption_type",e)},expression:"formdata.consumption_type"}},[a("el-option",{attrs:{label:"订餐就餐",value:1}}),a("el-option",{attrs:{label:"订餐未就餐",value:2}}),a("el-option",{attrs:{label:"未订餐就餐",value:3}})],1)],1)],1)],1),a("div",{staticClass:"btn-area"},[a("el-button",{attrs:{type:"primary",disabled:t.isDisabled},on:{click:function(e){return t.queryList(1)}}},[t._v("查询")]),a("el-button",{attrs:{type:"primary"}},[t._v("导出")])],1)])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"create_date",label:"下单时间",width:"180"}}),a("el-table-column",{attrs:{prop:"place",label:"消费地点"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号码"}}),a("el-table-column",{attrs:{prop:"type",label:"类型"}}),a("el-table-column",{attrs:{prop:"c_name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"num",label:"商品数量"}}),a("el-table-column",{attrs:{prop:"price",label:"商品金额"}}),a("el-table-column",{attrs:{prop:"deliver_way",label:"配送方式"}}),a("el-table-column",{attrs:{prop:"note",label:"备注",width:"300"}})],1),a("pagination",{attrs:{total:t.total,pageSize:t.size,currentPage:t.current_page},on:{pagination:t.queryList}})],1)])}),[],!1,null,"a75e1f46",null);e.default=v.exports},f44c:function(t,e,a){}}]);