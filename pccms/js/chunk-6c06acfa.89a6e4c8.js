(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c06acfa"],{"2f0c":function(t,e,a){"use strict";var n=a("7361");a.n(n).a},"333d":function(t,e,a){"use strict";var n={name:"Pagination",props:{small:{type:Boolean,default:!1},total:{required:!0,type:Number},page:{type:Number,default:1},background:{type:Boolean,default:!0},layout:{type:String,default:"prev, pager, next"},pageSize:{type:Number,default:10}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}}},methods:{handleClickPage:function(t){this.$emit("pagination",t)}}},i=(a("2f0c"),a("2877")),r=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{small:t.small,background:t.background,total:t.total,layout:t.layout,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleClickPage}})],1)}),[],!1,null,null,null);e.a=r.exports},7361:function(t,e,a){},ce58:function(t,e,a){},d7df:function(t,e,a){"use strict";var n=a("ce58");a.n(n).a},d7ea:function(t,e,a){"use strict";a.r(e);var n=a("a34a"),i=a.n(n),r=a("365c"),o=a("575f"),s=a("333d"),c=a("4360");function l(t,e,a,n,i,r,o){try{var s=t[r](o),c=s.value}catch(t){return void a(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function p(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var r=t.apply(e,a);function o(t){l(r,n,i,o,s,"next",t)}function s(t){l(r,n,i,o,s,"throw",t)}o(void 0)}))}}var d,u,m={components:{Pagination:s.a},data:function(){return{grade:c.a.getters.grade,formdata:{time_begin:"",time_end:"",company_ids:"",canteen_id:""},company_id:"",canteen_id:"",companyOptions:[],canteenOptions:[],tableData:[],spanArr:[],position:0,isDisabled:!0,current_page:1,size:10,total:0}},created:function(){this.companiesVisible?this.getCompanies():this.getLocationList()},computed:{companiesVisible:function(){return 3!==this.grade},isAble:function(){return!!this.formdata.time_end&&!!this.formdata.time_begin}},watch:{isAble:function(t){this.isDisabled=!t}},methods:{getList:function(t){this.formdata.canteen_id="",String(t).includes(",")?(this.canteenOptions=[{name:"全部",id:0}],this.formdata.canteen_id=0):this.getLocationList(t)},getCompanies:function(){var t=this;r.a.get("http://canteen.tonglingok.com/api/v1/admin/companies").then((function(e){var a=e.data,n=Object(o.b)(Object(o.a)(a));t.companyOptions=n})).catch((function(t){return console.log(t)}))},getLocationList:(u=p(i.a.mark((function t(e){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,r.a.get("http://canteen.tonglingok.com/api/v1/canteens?company_id=".concat(e));case 3:a=t.sent,t.next=9;break;case 6:return t.next=8,r.a.get("http://canteen.tonglingok.com/api/v1/managerCanteens");case 8:a=t.sent;case 9:"ok"===a.msg&&(this.canteenOptions=Object(o.d)(Array.from(a.data)));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)}),queryList:(d=p(i.a.mark((function t(e){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||1,t.next=3,r.a.get("http://canteen.tonglingok.com/api/v1/order/orderStatistic?page=".concat(e,"&size=").concat(this.size),this.formdata);case 3:"ok"===(a=t.sent).msg&&(this.tableData=Array.from(a.data.data),this.current_page=a.data.current_page,this.total=a.data.total,this.rowspan(0,"grade"),this.rowspan(1,"company_name"),this.rowspan(2,"canteen_name"),this.rowspan(3,"category_name"));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)}),rowspan:function(t,e){var a=this;this.spanArr[t]=[],this.position=0,this.tableData.forEach((function(n,i){0===i?(a.spanArr[t].push(1),a.position=0):a.tableData[i][e]===a.tableData[i-1][e]?(a.spanArr[t][a.position]+=1,a.spanArr[t].push(0)):(a.spanArr[t].push(1),a.position=i)}))},objectSpanMethod:function(t){t.row,t.column;for(var e=t.rowIndex,a=t.columnIndex,n=0;n<4;n++)if(a===n){var i=this.spanArr[n][e];return{rowspan:i,colspan:i>0?1:0}}}}},f=(a("d7df"),a("2877")),g=Object(f.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"statistics"},[a("div",{staticClass:"nav-title"},[t._v("订餐统计")]),a("el-divider"),a("div",{staticClass:"main"},[a("div",{staticClass:"main-header",class:{active:!t.companiesVisible}},[a("div",{staticClass:"select-title"},[a("el-form",{attrs:{inline:!0,model:t.formdata,"label-width":"40px","label-position":"left"}},[a("el-form-item",{attrs:{label:"开始"}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd",type:"datetime"},model:{value:t.formdata.time_begin,callback:function(e){t.$set(t.formdata,"time_begin",e)},expression:"formdata.time_begin"}})],1),a("el-form-item",{attrs:{label:"结束"}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd",type:"datetime"},model:{value:t.formdata.time_end,callback:function(e){t.$set(t.formdata,"time_end",e)},expression:"formdata.time_end"}})],1),t.companiesVisible?a("el-form-item",{attrs:{label:"公司"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择公司"},on:{change:t.getList},model:{value:t.formdata.company_ids,callback:function(e){t.$set(t.formdata,"company_ids",e)},expression:"formdata.company_ids"}},t._l(t.companyOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),a("el-form-item",{attrs:{label:"消费地点","label-width":"80px"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择消费地点"},model:{value:t.formdata.canteen_id,callback:function(e){t.$set(t.formdata,"canteen_id",e)},expression:"formdata.canteen_id"}},t._l(t.canteenOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),a("div",{staticClass:"btn-area"},[a("el-button",{attrs:{type:"primary",disabled:t.isDisabled},on:{click:function(e){return t.queryList(1)}}},[t._v("查询")]),a("el-button",{attrs:{type:"primary"}},[t._v("导出")])],1)]),a("div",{staticClass:"main-content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"日期",prop:"ordering_date"}}),a("el-table-column",{attrs:{label:"公司",prop:"company"}}),a("el-table-column",{attrs:{label:"消费地点",prop:"canteen"}}),a("el-table-column",{attrs:{label:"餐次",prop:"dinner"}}),a("el-table-column",{attrs:{label:"消费人数",prop:"count"}})],1),a("pagination",{attrs:{total:t.total,pageSize:t.size,currentPage:t.current_page},on:{pagination:t.queryList}})],1)])],1)])}),[],!1,null,null,null);e.default=g.exports}}]);