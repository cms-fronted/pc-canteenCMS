(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-142f5c9c"],{"191b":function(e,t,a){},"2f0c":function(e,t,a){"use strict";var n=a("7361");a.n(n).a},"333d":function(e,t,a){"use strict";var n={name:"Pagination",props:{small:{type:Boolean,default:!1},total:{required:!0,type:Number},page:{type:Number,default:1},background:{type:Boolean,default:!0},layout:{type:String,default:"prev, pager, next"},pageSize:{type:Number,default:10}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}}},methods:{handleClickPage:function(e){this.$emit("pagination",e)}}},s=(a("2f0c"),a("2877")),i=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{small:e.small,background:e.background,total:e.total,layout:e.layout,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleClickPage}})],1)}),[],!1,null,null,null);t.a=i.exports},"5d6f":function(e,t,a){"use strict";a.r(t);var n=a("365c"),s=a("333d"),i=a("4360"),l={data:function(){return{header:{token:i.a.getters.token},key:"",money:"",remark:"",detail:[],tableData:[],defaultProps:{children:"items",label:"name"},departmentList:[],department_id:"",personnelList:[],dialogFormVisible:!1,limit:1,total:0,current_page:1}},created:function(){this.fetchDepartmentList()},components:{Pagination:s.a},methods:{sendMessage:function(e){"ok"===e?this.$message({type:"success",message:"操作成功!"}):this.$message({type:"info",message:"操作失败"})},fetchDepartmentList:function(){var e=this;n.a.get("http://canteen.tonglingok.com/api/v1/departments/recharge").then((function(t){e.departmentList=t.data})).catch((function(e){return console.log(e)}))},handleNodeClick:function(e){var t=e.id;e.name;this.department_id=t,this.fetchPersonnelList()},renderContent:function(e,t){var a=t.node;t.data,t.store;return e("span",{class:"custom-tree-node"},[e("span",[a.label]),e("span",["（",a.data.count,"）"])])},fetchPersonnelList:function(){var e=this;n.a.get("http://canteen.tonglingok.com/api/v1/department/staffs/recharge",{page:1,size:10,department_id:this.department_id,key:this.key}).then((function(t){e.personnelList=t.data.data})).catch((function(e){return console.log(e)}))},handleSelectionChange:function(e){var t=this;this.detail=[],e.forEach((function(e){t.detail.push({phone:e.phone,card_num:e.card_num})}))},recharge:function(){var e=this;n.a.post("http://canteen.tonglingok.com/api/v1/wallet/recharge/cash",{money:this.money,remark:this.remark,detail:JSON.stringify(this.detail)}).then((function(t){e.sendMessage(t.msg)})).catch((function(e){return console.log(e)}))},handleSuccess:function(e,t,a){this.sendMessage(e.msg)},getList:function(e){this.current_page=e,this.fetchTableList()}}},r=(a("c01d"),a("2877")),o=Object(r.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"cash"},[a("div",{staticClass:"nav-title"},[e._v("现金充值")]),a("el-divider"),a("div",{staticClass:"main"},[a("div",{staticClass:"main-header"},[a("span",{staticClass:"content-header"},[e._v("人员信息")]),a("el-input",{staticClass:"filter-input",staticStyle:{width:"180px"},attrs:{placeholder:"关键字查询","prefix-icon":"el-icon-search"},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.fetchPersonnelList}},[e._v("查询")]),a("span",{staticClass:"content-header"},[e._v("充值金额")]),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入"},model:{value:e.money,callback:function(t){e.money=t},expression:"money"}}),a("span",{staticClass:"content-header"},[e._v("备注")]),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.recharge}},[e._v("充值")]),a("el-upload",{ref:"upload",staticClass:"upload-excel upload",attrs:{limit:e.limit,headers:e.header,accept:".xls,.xlsx",action:"http://canteen.tonglingok.com/api/v1/wallet/recharge/upload","show-file-list":!1,"on-success":e.handleSuccess,name:"cash"}},[a("el-button",{attrs:{type:"primary"}},[e._v("批量充值")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"total"},[a("span",[e._v("共有 "),a("strong",[e._v(e._s(e.total))]),e._v(" 条记录")])]),a("div",{staticClass:"main-content clearfix"},[a("div",{staticClass:"department-tree"},[a("el-tree",{ref:"tree",attrs:{data:e.departmentList,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderContent},on:{"node-click":e.handleNodeClick}})],1),a("div",{staticClass:"query-list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.personnelList,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"公司",prop:"company"}}),a("el-table-column",{attrs:{label:"部门",prop:"department"}}),a("el-table-column",{attrs:{label:"员工编号",prop:"code"}}),a("el-table-column",{attrs:{label:"姓名",prop:"username"}}),a("el-table-column",{attrs:{label:"手机号码",prop:"phone"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>10,expression:"total > 10"}],attrs:{total:e.total,page:e.current_page},on:{"update:page":function(t){e.current_page=t},pagination:e.getList}})],1)])])],1)])}),[],!1,null,null,null);t.default=o.exports},7361:function(e,t,a){},c01d:function(e,t,a){"use strict";var n=a("191b");a.n(n).a}}]);